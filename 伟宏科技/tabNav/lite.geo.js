!function(t){function e(e,n,a,i,r){var s="31.230393,121.473704";e&&n&&(s=n+encodeURIComponent(",")+e);var c="ak="+o+"&output=json&pois=1&location="+s,u="//api.map.baidu.com/geocoder/v2/?"+c,d=function(t){var o,r,s,c,u,d,l,p,f;d="中国",l="CHN",p="";var g=t&&t.result||{};return c=g.addressComponent||{},u=g.formatted_address||"",r=c.city||"",s=c.province||"",o=c.district||"",f=g.pois||[],""===d&&""===s&&""===r&&""===o?(i&&i(t),!1):a({address:u,location:e+","+n,info:c,city:r,province:s,district:o,pois:f,lng:e,lat:n,country:d,countryShortName:l,detailAddress:p,isBMap:!0})},l=function(t){i&&i(t)};t.Utils.$.ajax({url:u,dataType:"jsonp",success:d,error:l,timeout:r||8e3})}function n(e,n,o,a,i){function r(r){for(var s=function(t){if(!~u.indexOf("true")){u.push("true");var a,i,r,s,c="",d="",l="";if(t&&"OK"===t.status){if(!t.results)return!1;var p=t.results[0]||{};s=p.address_components||{};for(var f in s){var g=s[f],v=g&&g.long_name;g.types&&("country"==g.types[0]&&"political"==g.types[1]&&(c=v,d=g.short_name),"administrative_area_level_1"===g.types[0]&&"political"===g.types[1]&&(r=v),"locality"===g.types[0]&&"political"===g.types[1]&&(i=v),"administrative_area_level_2"===g.types[0]&&"political"===g.types[1]&&(a=v),"sublocality_level_1"===g.types[0]&&"sublocality"===g.types[1]&&(a=v))}return"string"!=typeof i&&"string"==typeof r&&(i=r),""===c&&""===r&&""===i&&""===a?!1:o({address:p.formatted_address,location:e+","+n,info:s,city:i,province:r,district:a,lng:e,lat:n,country:c,countryShortName:d,detailAddress:l})}return!1}},c=function(t){return~u.indexOf("true")?void 0:~u.indexOf("false")?void(a&&a(t)):void u.push("false")},u=[],d=0;d<r.length;d++)t.Utils.$.ajax({url:r[d],dataType:"json",success:s,error:c,timeout:i||8e3})}var s=t.getGoogleChannel();if(s){var c=t._getUrl("12901/getSignatureUrl.json");-1!=c.indexOf("m.fws")&&(c+="?subEnv=fat685");var u=t.Model({url:c,checkAuth:!1,param:{lng:e,lat:n,type:"geocoding",channel:s,language:"zh-CN"}});u.execute(function(t){if("200"==t.statusCode){var e=t.signatureUrl,n=["https://maps.googleapis.com"+e,"https://ditu.google.cn"+e];r(n)}else a&&a(t)},function(t){a&&a(t)})}else{var d="31.230393,121.473704";e&&n&&(d=n+encodeURIComponent(",")+e);var l="latlng="+d+"&sensor=false&key=AIzaSyAYF5VPydhnTHoS1f9OLy3m7QHCXwDbrlY",p=["https://maps.googleapis.com/maps/api/geocode/json?"+l,"//ditu.google.cn/maps/api/geocode/json?language=zh-CN&"+l];r(p)}}t.getGoogleChannel=function(){return t.gChanal?t.gChanal:"function"==typeof window.getGoogleChannel?getGoogleChannel():void 0},t.setGoogleChannel=function(e){t.gChanal=e};var o="C2iS1Mz9E4zRORAUm6tT4qO7",a=function(){var t=0;return function(){return(new Date).getTime()+"."+t}}();if(t.app.vendor.is("CTRIP"))t.requestCityInfo=function(t,e,n,o,i,r,s){var c=function(t){return t?"geo"==t.type||"address"==t.type||"CtripCity"==t.type:!1},u=!0,d=function(e,o){var a=1,i=0,s=window.Math.abs(o);if(c(e)?s>0&&(i=s):i=a,i)"function"==typeof l&&l(e,o);else{var d=e.value,p="undefined"!=typeof d.addrs;"CityEntities"in d&&"function"==typeof r&&r(d),u&&"function"==typeof n&&n(d.lng,d.lat),p&&"function"==typeof t&&t({lng:d.lng,lat:d.lat,city:d.city||d.ctyName||d.province,province:d.province,district:d.district,country:d.country,countryShortName:d.countryShortName,address:d.addrs,detailAddress:d.detailAddress,pois:d.pois})}u=!1},l=function(t,n){var a=t&&t.error_code||n;a?(a+="",a.indexOf("201")>-1?o(a):a.indexOf("202")>-1?o(a):a.indexOf("203")>-1?o(a):a.indexOf("204")>-1?e(a):a.indexOf("205")>-1&&s&&s(a)):o("(-201)定位未开启")};window.app||(window.app={});var p;window.app.callback&&(p=window.app.callback);try{var f=a();window.app.callback=function(t){p(t),"locate"==t.tagname&&t.param&&t.param.sequenceId==f&&(t.error_code?l(t,t.error_code):d(t.param,t.error_code||t.number))},"undefined"!=typeof CtripMap&&CtripMap.app_locate&&CtripMap.app_locate(20,!0,!0,f)}catch(g){}};else{window.$&&"function"==typeof window.$.ajax&&(t.Utils.$.ajax=window.$.ajax);var i={Aboard:2,Domestic:1,Unknown:-1,aroundAboardRectList:[[125478833,40538425,135928497,16590043],[128054454,54437790,136370032,49918776],[89567309,54351906,115617882,47881407],[71832315,54566279,82281980,46323836],[72788974,28001436,85887850,16590043],[92510877,48029708,111570476,45034268],[85593493,26157025,97294174,16519064],[97073406,20935216,107743838,16305964],[98324422,45190596,109142033,42854577],[71979493,45863038,78896877,41817208]],chinaRectList:[[85374342,41697126,124486996,28705892],[98942349,28714002,122527683,23331042],[108012216,23415965,119252965,17294543],[120025651,51286036,126391116,41330674],[82936701,46727439,90553182,41621242],[126188746,48211817,129757821,42485061],[129518656,47611932,131468770,44959641],[131376782,47487374,133805226,46225387],[79753968,41876130,85604309,30872189],[113457816,44802677,120117638,41517618],[118977005,23526282,121975765,21629857],[109667973,17321053,119050594,14580095],[76258482,40359687,80011530,35915704],[90534784,44710915,94030271,41531444],[80710628,45077082,83028687,41862379],[85935460,48414308,88437492,46645143],[93975079,42559912,101462779,41600531],[93956681,44157262,95354876,42491869],[116695740,46301949,120117638,44619006],[116401384,49444657,120191227,48057877],[121000708,53244099,124569783,51210984],[106724405,42232628,113494611,41683336],[112133211,44355602,113568200,42123151],[110918989,43155464,112206800,42232628],[115150367,45324216,116769330,44724032],[126299129,49588397,128102064,48057877],[128065270,49131761,129757821,48131826],[129721026,48622090,130530508,47611932],[124349016,52822665,125710416,51095279],[122325313,28884167,123760302,25662561],[111029373,14651757,118388292,10605300],[109778357,10095218,109778357,10095218],[109631178,10459649,116548562,7753573],[110514249,7826971,113678584,4734480],[124330619,41399976,125480450,40689610],[126345123,42512290,128046872,41827986],[127973283,42539507,129104717,42143692],[74510739,40162360,76350468,38678393],[119087389,21629857,120706351,20142916],[106853187,23339537,108067408,21990651],[129707229,44975967,130985841,43017244],[130958245,44582859,131169814,43104932],[131418176,46247729,133129126,45359896],[133073934,48054793,134269758,47409374],[99701237,23386249,101577762,22174986],[100179567,22243514,101559364,21745927],[101485775,23437187,104245370,22875776],[98008686,25240784,99057332,24181992],[124463999,40686109,124905534,40461646],[125457453,41334141,126055365,40979564],[126368119,41824546,126607284,41645397],[125475850,40979564,125687419,40853958],[124477797,40465160,124728460,40343852],[124470898,40347371,124618076,40285757],[124891736,40694862,125153898,40607283],[126046166,41332407,126262335,41165784],[127214395,41836586,128083666,41546995],[126386516,50257998,126386516,50257998],[126280732,50257998,127513351,49580921],[126363520,50934256,127117809,50225552],[125669022,52398490,126276133,51247082],[80948643,30905163,81403976,30280446],[83574857,30911112,85488176,29214825],[98136317,28872274,99079179,27642374]],largeChinaRect:[73083331,54006559,135266195,17015367],isInRect:function(t,e,n){return t>=n[0]&&t<=n[2]&&e>=n[3]&&e<=n[1]?!0:!1},isInRectList:function(t,e,n){for(var o,a=0;a<n.length-1;a++)if(o=n[a],this.isInRect(t,e,o))return!0;return!1},getCountry:function(t,e){var n=this.Unknown,o=1e6*e,a=1e6*t,i=!this.isInRect(a,o,this.largeChinaRect);if(i||(i=this.isInRectList(a,o,this.aroundAboardRectList)),i)n=this.Aboard;else{var r=this.isInRectList(a,o,this.chinaRectList);r&&(n=this.Domestic)}return n}};t.requestCityInfo=function(e,n,o,a,r,s,c,u,d){var l=function(e,n,o){var a=e.coords.longitude,r=e.coords.latitude,s=1;if(a&&r&&(s=i.getCountry(a,r)),d)1==s?n?o(a,r,!0,s):t.tansformLongitude(a,r,function(t,e){o(t,e,!0,s)},function(){var e=t.aMapToBMap(a,r);o(e.lng,e.lat,!0,s)},8e3,!0):o(a,r,!1,s);else if(n&&1==s){var c=t.bMapToAMap(a,r);o(c.lng,c.lat,!1,s)}else o(a,r,!1,s)},p=function(a,i,u){l(a,i,function(a,i,l,p){u&&r||o&&o(a,i,l);var f=function(o){var l;if(o.isBMap&&!d&&(l=t.bMapToAMap(o.lng,o.lat),o.lng=l.lng,o.lat=l.lat,o.location=o.lng+","+o.lat),"function"==typeof s){var p=function(){var e="//m.ctrip.com/restapi/soa2/10398/json/LBSLocateCity";"file:"==window.location.protocol&&(e="http:"+e);var n=t.Model({url:e,checkAuth:!1,param:{Longitude:a,Latitude:i,CountryName:o.country,ProvinceName:o.province,L1CityName:o.city,L2CityName:o.district,TownName:"",Language:"CN"}});return n};p().execute(function(t){s(t)},function(t){c&&c(t)})}u&&r?n&&n():e&&e(o)},g=function(){n&&n()};!r||l?t.requestMapAddress(a,i,f,g,l):1!=p||l?t.requestMapAddress(a,i,f,g,l):t.tansformLongitude(a,i,function(e,n){t.requestMapAddress(e,n,f,g,!0)},function(){n&&n()},8e3,!0)})},f=function(t,e){return"function"==typeof a?void a(e,t):void(n&&n(e))};this.requestGeographic(p,f)};var r=function(e,n){if("undefined"!=typeof BMap){var o=new BMap.Geolocation;o.getCurrentPosition(function(t){0===this.getStatus()&&t?e&&t.point&&e(t.point.lng,t.point.lat,!0):n(this.getStatus())},{enableHighAccuracy:!0})}else{var a="ak=C2iS1Mz9E4zRORAUm6tT4qO7&coor=bd09ll";t.Utils.$.ajax({url:"//api.map.baidu.com/location/ip?"+a,dataType:"jsonp",success:function(t){if(t&&0===t.status){var o=t.content&&t.content.point||{};e&&e(o.x,o.y,!1,!0)}else n&&n()},error:function(t){n&&n(t)},timeout:8e3})}};t.requestGeographic=function(t,e,n){var o={baidu:{},navigator:{},errObj:{err:"",err_msg:""}},a=!1,i=function(e){o.navigator=e,a||!o.baidu.coords&&!o.baidu.err||(a=!0,t(e))},s=function(n){o.navigator.err=!0;var i="未能获取到您当前位置，请重试或选择城市";switch(n.code){case n.TIMEOUT:i="获取您当前位置超时，请重试或选择城市！";break;case n.PERMISSION_DENIED:i="您拒绝了使用位置共享服务，查询已取消，请开启位置共享或选择城市！";break;case n.POSITION_UNAVAILABLE:i="获取您当前位置信息失败，请重试或选择城市！"}return o.baidu.coords||o.baidu.err?void(a||(a=!0,o.baidu.coords?t(o.baidu,!0,o.baidu.isIp):e&&e(n,i))):(o.errObj.err=n,void(o.errObj.err_msg=i))};r(function(e,n,i,r){return o.baidu.coords={},o.baidu.coords.latitude=n,o.baidu.coords.longitude=e,o.baidu.isIp=r,a||!i&&!o.navigator.err?!a&&o.navigator.coords?(a=!0,void t(o.navigator)):void setTimeout(function(){a||(a=!0,t(o.baidu,!0,r))},2e4):(a=!0,void t(o.baidu,!0,r))},function(){return o.baidu.err=!0,!a&&o.navigator.err?(a=!0,void e(o.errObj.err,o.errObj.err_msg)):!a&&o.navigator.coords?(a=!0,void t(o.navigator)):void setTimeout(function(){a||(a=!0,e(3,"获取您当前位置超时，请重试或选择城市！"))},2e4)}),window.navigator&&window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition(i,s,{enableHighAccuracy:!0,maximumAge:5e3,timeout:n||15e3}):e&&!a&&e("","获取您当前位置信息失败，浏览器不支持定位！")},t.requestMapAddress=function(o,a,r,s,c,u){var d=1;if(o&&a&&(d=i.getCountry(o,a)),"boolean"==typeof c&&(u=c,c=null),1==d){if(!u){var l=t.aMapToBMap(o,a);o=l.lng,a=l.lat}e(o,a,r,s,c)}else n(o,a,r,s,c)},t.tansformLongitude=function(e,n,a,i,r,s){var c="coords="+e+encodeURIComponent(",")+n+"&ak="+o+"&output=json&from="+(s?1:3);t.Utils.$.ajax({url:"//api.map.baidu.com/geoconv/v1/?"+c,dataType:"jsonp",success:function(t){if(t&&0===t.status){var e=t.result&&t.result[0]||{};a&&a(e.x,e.y)}else i&&i()},error:function(t){i&&i(t)},timeout:r||8e3})},t.aMapToBMap=function(t,e){var n=52.35987755982988,o=t,a=e,i=Math.sqrt(o*o+a*a)+2e-5*Math.sin(a*n),r=Math.atan2(a,o)+3e-6*Math.cos(o*n);return{lng:i*Math.cos(r)+.0065,lat:i*Math.sin(r)+.006}},t.bMapToAMap=function(t,e){var n=52.35987755982988,o=t-.0065,a=e-.006,i=Math.sqrt(o*o+a*a)-2e-5*Math.sin(a*n),r=Math.atan2(a,o)-3e-6*Math.cos(o*n);return{lng:i*Math.cos(r),lat:i*Math.sin(r)}}}t.requestAMapKeyword=function(e,n,a,i,r){var s;s="query="+e+"&region="+n+"&ak="+o+"&scope=2&output=json",t.Utils.$.ajax({url:"https://api.map.baidu.com/place/v2/search?"+s,dataType:"jsonp",success:function(t){if(t&&0===t.status&&"ok"==t.message){var e=t.results||[];a&&a(e)}else i&&i()},error:function(t){i&&i(t)},timeout:r||8e3})}}(window.LizardLite);
//# sourceMappingURL=lite.geo.js.cc290af7.map